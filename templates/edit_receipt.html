<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit receipt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>
<body>

<div class="container-xl my-5">
    <div class="row">
        <div class="col-8">
            <div class="btn-group">
                <a href="/" class="btn btn-secondary mx-1"> home </a>
                <a href="/new_receipt" class="btn btn-secondary mx-1"> Agrergar nuevo recibo </a>
                <a href="/list_receipts" class="btn btn-secondary mx-1"> Editar un recibo  </a>
                <a href="/excel_dashboard" class="btn btn-secondary mx-1"> Generar un excel de rendiciones </a>
            </div>
        </div>
        <div class="col">
            <a class="btn btn-primary" href="/logout">log out</a>
        </div>
    </div>
</div>

<div class="container-xl my-5">
    <div class="bg-light p-1 rounded border-dark my-3">
            <p class="lead" >
                Clickear una vez el boton correspondiente al área que se desea extraer, luego escojer rectangulos que tienen el valor del área y enviar a extraer el área, finalmente revisar y enviar a guardar. </p>
    </div>
    <div id="receiptid" style="display:none">{{receipt_id}}</div>

    <!-- TODO ALL CREATED JUST BY KNOWING THE NAMES OF THINGS TO EXTRACT -->

    <button onclick="buttons_callback('rut')"> Rut </button>
    <button onclick="buttons_callback('name')"> Nombre </button>
    <button onclick="buttons_callback('total_amount')"> Monto Total </button>

    <br />
    <br />
    <!-- TODO: agrupar todos los divs en uno solo -->
    <div id="rut_div" style="display:none">
        <button onclick="process_info('rut_ia', 'rut: ', 'rut_final_text')"> enviar a extraer texto </button>
        <div id="rut_ia"> rut:  </div>
        <div id="rut_final_text_div" style="display:none">
            Texto a guardar: <input type="text" id="rut_final_text" maxlength="100" size="50">
            <button onclick="send_info('rut_final_text')"> Guardar Texto</button>
        </div>


    </div>

    <div id="name_div" style="display:none">
        <button onclick="process_info('name_ia', 'name: ', 'name_final_text')"> enviar a extraer texto </button>
        <div id="name_ia"> name:   </div>
        <div id="name_final_text_div" style="display:none">
            Texto a guardar: <input type="text" id="name_final_text" maxlength="100"  size="50">
            <button onclick="send_info('name_final_text')"> Guardar Texto</button>
        </div>
    </div>


    <div id="total_amount_div" style="display:none">
        <button onclick="process_info('total_amount_ia', 'total_amount: ', 'total_amount_final_text')"> enviar a extraer texto </button>
         <div id="total_amount_ia" > total_amount: </div>
        <div id="total_amount_final_text_div" style="display:none">
            Texto a guardar: <input type="text" id="total_amount_final_text" maxlength="100" size="50">
            <button onclick="send_info('total_amount_final_text')"> Guardar Texto</button>
        </div>
    </div>
    <br />
    <br />
    <div class="bg-success rounded text-white justify-content-center my-3" id="mensaje_success" style="display:none"> Guardado con exito </div>

    <div>
        <canvas id="canvas_id" ></canvas>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src='{{static_url("edit_receipts.js")}}'></script>
</body>
</html>